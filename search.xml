<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>websocket</title>
      <link href="/2023/11/06/websocket%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/2023/11/06/websocket%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="é—®é¢˜ğŸ¤•"><a href="#é—®é¢˜ğŸ¤•" class="headerlink" title="é—®é¢˜ğŸ¤•"></a>é—®é¢˜ğŸ¤•</h1><blockquote><p> å†™è¯¾è®¾çš„æ—¶å€™ï¼Œ ä½¿ç”¨websocket å»ºç«‹è¿æ¥å‘é€æ¶ˆæ¯ï¼Œ å‡ºç°äº† ä»¥ä¸‹ä¸¤ç§é—®é¢˜ </p></blockquote><h2 id="CloseStatus-1002"><a href="#CloseStatus-1002" class="headerlink" title="CloseStatus &#x3D; 1002"></a>CloseStatus &#x3D; 1002</h2><p><img src="https://cdn.jsdelivr.net/gh/Alanyaeer/ImgSummary@master/img/202311061317978.png" alt="image-20231106131744951"></p><ul><li>é‡åˆ°è¿™ä¸ªé—®é¢˜å¤šåŠæ˜¯å› ä¸º ä½ å‘é€çš„æ¶ˆæ¯çš„ æ—¶å€™å‰ç«¯æ²¡æœ‰å¯¹æ•°æ®è¿›è¡Œè°ƒæ•´</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">socket.<span class="title function_">send</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(sendmessage))</span><br></pre></td></tr></table></figure><blockquote><p>JSON.stringify å¦‚æœä¸åŠ ä¸Šè¿™ä¸ªå°±ä¼šæŠ¥é”™ï¼Œ è€Œæˆ‘æ˜¯åœ¨å†™å¿ƒè·³æ£€æµ‹çš„æ—¶å€™ï¼Œ æ²¡æœ‰å‘ç”Ÿçš„æ¶ˆæ¯è¿›è¡Œ å­—ç¬¦ä¸²åŒ–ï¼Œ å¯¼è‡´çš„æŠ¥é”™</p></blockquote><h2 id="CloseStatus-1006"><a href="#CloseStatus-1006" class="headerlink" title="CloseStatus &#x3D; 1006"></a>CloseStatus &#x3D; 1006</h2><p><img src="https://cdn.jsdelivr.net/gh/Alanyaeer/ImgSummary@master/img/202311061317040.png" alt="image-20231106131730108"></p><ul><li>åæ¥å‘ç°æ˜¯è‡ªå·±ä¿®æ”¹ipåœ°å€çš„æ—¶å€™å§åé¢çš„ ç«¯å£å·ä¹Ÿç»™åˆ é™¤äº†</li></ul><p>æ­£ç¡® çš„websocket æ ¼å¼ æ˜¯ <code>ws:// ipåœ°å€ + :(ç«¯å£å·) + /xxx</code>ï¼Œ è¿™æ ·ä¸€ä¿®æ”¹ä¹‹åå°±æœ¨æœ‰è¿™ä¸ªé—®é¢˜äº† ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> websocket </tag>
            
            <tag> ç–‘éš¾è§£æƒ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Netty</title>
      <link href="/2023/10/31/Netty/"/>
      <url>/2023/10/31/Netty/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h1 id="Netty"><a href="#Netty" class="headerlink" title="Netty"></a>Netty</h1><blockquote><p>ç‰¢è®°å››ä¸ªç‚¹</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/Alanyaeer/ImgSummary@master/img/202310312044227.png" alt="image-20231031204440182"></p><h2 id="NIOåŸºç¡€"><a href="#NIOåŸºç¡€" class="headerlink" title="NIOåŸºç¡€"></a>NIOåŸºç¡€</h2><blockquote><p>éé˜»å¡io - non-blocking io</p></blockquote><h3 id="ä¸‰å¤§ç»„ä»¶"><a href="#ä¸‰å¤§ç»„ä»¶" class="headerlink" title="ä¸‰å¤§ç»„ä»¶"></a>ä¸‰å¤§ç»„ä»¶</h3><blockquote><p>Channel Buffer Selector</p></blockquote><ol><li><p>Channel &amp; Buffer</p><p>æœ€å¸¸ç”¨çš„ Bufferï¼š ByteBuffer</p><p>å…¶ä»–çš„ä¸æ˜¯å¾ˆæ¸…æ¥š</p></li><li><p>Selector</p><p>Selectorç›¸å½“äºä¸€ä¸ªä¸­è½¬ç«™ï¼Œ æ¥åˆ†å‘channel å‘æ¥çš„æ•°æ®ç»™thread<img src="https://cdn.jsdelivr.net/gh/Alanyaeer/ImgSummary@master/img/202310312106328.png" alt="image-20231031210625241"></p></li></ol><h3 id="bytebuffer"><a href="#bytebuffer" class="headerlink" title="bytebuffer"></a>bytebuffer</h3><h4 id="bytebufferçš„åŸºæœ¬ä½¿ç”¨"><a href="#bytebufferçš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="bytebufferçš„åŸºæœ¬ä½¿ç”¨"></a>bytebufferçš„åŸºæœ¬ä½¿ç”¨</h4><blockquote><p>ä»£ç å¦‚ä¸‹</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String []args)</span>&#123;</span><br><span class="line">    <span class="keyword">try</span>(<span class="type">FileChannel</span> <span class="variable">channel</span>  <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;data.txt&quot;</span>).getChannel())&#123;</span><br><span class="line">        <span class="comment">// å‡†å¤‡ç¼“å†²åŒº </span></span><br><span class="line"><span class="type">ByteBuffer</span> <span class="variable">buffer</span> <span class="operator">=</span> ByteBuffer.allocate(<span class="number">10</span>)</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="comment">// ä»channel è¯»å–æ•°æ®ï¼Œ å‘buffer å†™å…¥</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> channel.read(buffer)</span><br><span class="line">            log.debug(xxx ,len);</span><br><span class="line">            <span class="keyword">if</span>(len == -<span class="number">1</span>)&#123; <span class="comment">//è¯»å–å®Œæˆäº† </span></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// æ‰“å°</span></span><br><span class="line">            buffer.filp() <span class="comment">// åˆ‡æ¢è‡³è¯»å–æ¨¡å¼</span></span><br><span class="line">            <span class="keyword">while</span>(buffer.hasRemaining())&#123;</span><br><span class="line">                <span class="type">byte</span> <span class="variable">b</span> <span class="operator">=</span> buffer.get() <span class="comment">//è¯»å–ä¸€ä¸ªå­—èŠ‚</span></span><br><span class="line">                log.debug(xxx, b);</span><br><span class="line">            &#125;</span><br><span class="line">            buffer.clear() <span class="comment">//åˆ‡æ¢æ¢ä½å†™å…¥æ¨¡å¼</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Bytebuffer-ç»“æ„"><a href="#Bytebuffer-ç»“æ„" class="headerlink" title="Bytebuffer ç»“æ„"></a>Bytebuffer ç»“æ„</h4><blockquote><p>å®ƒæœ‰ä¸‰ä¸ªé‡è¦çš„å±æ€§</p></blockquote><ul><li>capacity</li><li>position</li><li>limit</li></ul><p>è°ƒç”¨<strong>clear****æ–¹æ³•</strong></p><ol><li><strong>é»˜è®¤æ˜¯å†™æ¨¡å¼</strong></li></ol><p>å¦‚å›¾æ‰€ç¤º</p><p><img src="https://cdn.jsdelivr.net/gh/Alanyaeer/ImgSummary@master/img/202310312134540.png" alt="image-20231031213414504"></p><p>positionå¾€åè¯»å–ï¼Œ ç›´åˆ°é‡åˆ° Limit æˆ–è€…Capacity ã€‚ </p><blockquote><p><strong>è¿™é‡Œè®²è®² Limit å’ŒCapacity çš„åŒºåˆ«</strong></p><p><code>ByteBuffer buffer = ByteBuffer.allocate(10)</code>è¿™å¥è¯å°±é™åˆ¶äº†å®ƒçš„Capacity ä¸º 10ã€‚</p><p>åœ¨ç¨‹åºå¾€åè¿è¡Œä¹‹åï¼Œ limit æ˜¯å°äºç­‰äº Capacity çš„ã€‚ æ¯”å¦‚æˆ‘è¿™ä¸ªæ–‡æœ¬æ˜¯13ä¸ªå­—èŠ‚</p><p>é‚£ä¹ˆç¬¬ä¸€æ¬¡è¯»å–åˆ°çš„Limit å°±æ˜¯ 10ï¼Œ ç¬¬äºŒæ¬¡è¯»å–æ˜¯3.</p></blockquote><p>åœ¨è°ƒç”¨buffer çš„ <strong>flipæ–¹æ³•</strong>ä¹‹å</p><ol start="2"><li><strong>è¿›å…¥å†™æ¨¡å¼</strong></li></ol><p>Position æŒ‡é’ˆè·³å›åˆ°ç¬¬0ä½åœ°å€ï¼Œ ç„¶åè¾¹å‘å³ç§»åŠ¨ï¼Œ è¾¹è¯»å–æ•°æ®ï¼Œç›´åˆ°é‡åˆ°Limit </p><p><img src="https://cdn.jsdelivr.net/gh/Alanyaeer/ImgSummary@master/img/202310312140821.png" alt="image-20231031214014784"></p><p><strong>ï¼ˆè°ƒç”¨Compactæ–¹æ³•ï¼‰</strong></p><ol start="3"><li>è¿›å…¥Compactæ¨¡å¼</li></ol><p><img src="https://cdn.jsdelivr.net/gh/Alanyaeer/ImgSummary@master/img/202310312142916.png" alt="image-20231031214211859"></p><p>å’Œæ™®é€šçš„è¯»æ¨¡å¼ä¸åŒçš„æ˜¯ï¼Œ<strong>åœ¨compact æ¨¡å¼ä¸­ï¼Œ positionä¼šå°†ä¼šå†™å…¥çš„æ•°æ®ï¼Œ å‘å‰å‹ç¼©</strong>ã€‚</p><p> ç„¶åPositionè·³å…¥åˆ°æœ€åå·²è¯»å–æ•°æ®çš„ä¸‹ä¸€ä½åœ°å€ç»§ç»­è¯»å–</p><ul><li>éœ€è¦æ³¨æ„çš„æ˜¯ Compact ä¼šä¸ä¼šæ¶ˆé™¤æœ€åä¸€ä½æ•°æ®ï¼Œä»–ä¼šåœ¨å†™å…¥æ¨¡å¼çš„æ—¶å€™æŠŠé‚£ä¸ªå­—ç¬¦è¦†ç›–</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Alanyaeer/ImgSummary@master/img/202310312156938.png" alt="image-20231031215648878"></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Netty </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java_Juc</title>
      <link href="/2023/10/31/Java-Juc/"/>
      <url>/2023/10/31/Java-Juc/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h1 id="Java-Juc"><a href="#Java-Juc" class="headerlink" title="Java-Juc"></a>Java-Juc</h1><p>ã€‚ã€‚ã€‚ å­¦å®Œnettyåœ¨æ¥çœ‹è¿™ä¸ªå§ï¼</p><blockquote><p>æ°´ä¸€æ³¢ commit</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
            <tag> å­¦ä¹  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¿œç¨‹mysqlè¿æ¥ä¸ä¸Š</title>
      <link href="/2023/10/30/%E8%BF%9C%E7%A8%8Bmysql%E8%BF%9E%E6%8E%A5%E4%B8%8D%E4%B8%8A/"/>
      <url>/2023/10/30/%E8%BF%9C%E7%A8%8Bmysql%E8%BF%9E%E6%8E%A5%E4%B8%8D%E4%B8%8A/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h1 id="ç”¨æˆ·æƒé™å·²ç»æ˜¯-ï¼Œä½†æ˜¯è¿œç¨‹æ•°æ®åº“ä¾æ—§è¿æ¥ä¸ä¸Š"><a href="#ç”¨æˆ·æƒé™å·²ç»æ˜¯-ï¼Œä½†æ˜¯è¿œç¨‹æ•°æ®åº“ä¾æ—§è¿æ¥ä¸ä¸Š" class="headerlink" title="ç”¨æˆ·æƒé™å·²ç»æ˜¯%ï¼Œä½†æ˜¯è¿œç¨‹æ•°æ®åº“ä¾æ—§è¿æ¥ä¸ä¸Š"></a>ç”¨æˆ·æƒé™å·²ç»æ˜¯%ï¼Œä½†æ˜¯è¿œç¨‹æ•°æ®åº“ä¾æ—§è¿æ¥ä¸ä¸Š</h1><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>æœ€è¿‘è¶ç€åŒ11è´­ä¹°äº†è…¾è®¯äº‘æœåŠ¡å™¨ï¼Œæƒ³ç€é…ç½®å¥½ç¯å¢ƒï¼Œæ—©ç‚¹ç”¨ä¸Šã€‚</p><p>ç„¶åå¯åŠ¨æˆ‘çš„æ•°æ®åº“ å¼€å§‹ ç‹ ç‹ çš„è¿æ¥ï¼ˆè¯¯ï¼‰ï¼Œ ç»“æœéƒ½æ˜¯timeout ï¼Ÿ ï¼Œ ä»€ä¹ˆæˆ‘æ˜æ˜å·²ç»è®¾ç½®äº†ç”¨æˆ·æƒé™æ˜¯%å•Šï¼</p><p><img src="https://cdn.jsdelivr.net/gh/Alanyaeer/ImgSummary@master/img/202310301954484.png" alt="image-20231030195447448"></p><h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><p>åæ¥æ€æ¥æƒ³å»ï¼Œ çªç„¶æƒ³è¦å»çœ‹çœ‹ç«¯å£æ˜¯ä¸æ˜¯3306ï¼Œ ç„¶åæƒ³åˆ°ä¸­åˆæ‰“å¼€è…¾è®¯äº‘çš„æ—¶å€™ï¼Œçœ‹åˆ°äº†ç«¯å£ï¼Ÿ æˆ‘æ‰çŒ›åœ°æ„è¯†åˆ°æˆ‘çš„3306ç«¯å£æ²¡æœ‰å¼€å¯</p><blockquote><p>ä¸è¿‡è¿™ä¸ªå·²ç»æ˜¯å¼€å¯åçš„äº†</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/Alanyaeer/ImgSummary@master/img/202310301951278.png" alt="image-20231030195131182"></p><h3 id="å¼€å¯ç«¯å£æ–¹å¼"><a href="#å¼€å¯ç«¯å£æ–¹å¼" class="headerlink" title="å¼€å¯ç«¯å£æ–¹å¼"></a>å¼€å¯ç«¯å£æ–¹å¼</h3><ul><li>ç‚¹å‡» æ·»åŠ è§„åˆ™</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Alanyaeer/ImgSummary@master/img/202310301952077.png" alt="image-20231030195223035"></p><p>è·³å‡ºæ¥è¿™ä¸ªé¡µé¢ï¼Œ ç„¶åå°†åº”ç”¨ç±»å‹çš„ä¸‹æ‹‰æ¡†é€‰æ‹©mysql ï¼Œå°±å¥½äº†</p><p><img src="https://cdn.jsdelivr.net/gh/Alanyaeer/ImgSummary@master/img/202310301952193.png" alt="image-20231030195259158"></p>]]></content>
      
      
      <categories>
          
          <category> å‰åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è·¨åŸŸè¯·æ±‚è§£å†³-nginxæœåŠ¡å™¨</title>
      <link href="/2023/10/28/%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82%E8%A7%A3%E5%86%B3-nginx%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
      <url>/2023/10/28/%E8%B7%A8%E5%9F%9F%E8%AF%B7%E6%B1%82%E8%A7%A3%E5%86%B3-nginx%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h1 id="è·¨åŸŸè¯·æ±‚é—®é¢˜-nginxè§£å†³"><a href="#è·¨åŸŸè¯·æ±‚é—®é¢˜-nginxè§£å†³" class="headerlink" title="è·¨åŸŸè¯·æ±‚é—®é¢˜ - nginxè§£å†³"></a>è·¨åŸŸè¯·æ±‚é—®é¢˜ - nginxè§£å†³</h1><ul><li>æƒ³è±¡ä¸€ä¸ªåœºæ™¯ï¼Œ æˆ‘åœ¨ç”¨vue3 vite å†™å‰ç«¯ï¼ˆæˆ–è€…å·²ç»æ‰“åŒ…åçš„æ–‡ä»¶ï¼‰ï¼Œ åŒæ—¶åç«¯ç”¨springboot ï¼Œ æˆ‘å†™å®Œä¸€ä¸ªåŠŸèƒ½æƒ³è¦è°ƒè¯•ï¼Œ ä½†æ˜¯é‡åˆ°äº†ä¸‹é¢è¿™ä¸ªé—®é¢˜</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Alanyaeer/web-component@master/assets/202310282236940.png" alt="image-20231028223647903"></p><p>è¿™å°±æ˜¯è·¨åŸŸè¯·æ±‚çš„ä¼šå‡ºç°çš„é—®é¢˜ã€‚</p><h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><ul><li><p>æˆ‘åœ¨ç½‘ä¸Šçœ‹åˆ°äº†å¾ˆå¤šï¼Œ åœ¨å‰ç«¯é…ç½®ä¸€äº›æ–‡ä»¶ï¼Œ åœ¨åç«¯åŠ ä¸Šæ³¨è§£æˆ–æ·»åŠ ä¸€äº›é…ç½®ç±»æ–‡ä»¶ï¼Œ ä½†æ˜¯æ°å·§æˆ‘çš„ç¨‹åºä½¿ç”¨äº†ä¸Šé¢ç§ç§æ–¹æ³•éƒ½æ— æ³•æˆåŠŸï¼Œ åœ¨èˆå‹çš„æé†’ä¸‹ï¼Œ æˆ‘å¼€å§‹ä½¿ç”¨nginx</p></li><li><p>æ‰“å¼€nginx æ–‡ä»¶å¤¹ æ‰“å¼€conf</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/Alanyaeer/web-component@master/assets/202310282239386.png" alt="image-20231028223957355"></p><ul><li>ä½¿ç”¨ vscode æ‰“å¼€ è¿™ä¸ªnginx.conf(æœ€å¥½ä¸è¦ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨)</li></ul><p><img src="https://cdn.jsdelivr.net/gh/Alanyaeer/web-component@master/assets/202310282240185.png" alt="image-20231028224030156"></p><ul><li>åŠ ä¸Š è¿™æ®µä»£ç </li></ul><p><img src="https://cdn.jsdelivr.net/gh/Alanyaeer/web-component@master/assets/202310282241195.png" alt="image-20231028224109169"></p><p>æˆ‘è§£é‡Šä¸€ä¸‹å®ƒçš„ä½œç”¨ï¼Œ é¦–å…ˆ nginx æœ‰ä¸€ä¸ªç›‘å¬çš„ç«¯å£ï¼Œ è¿™é‡Œå°±æ˜¯180ï¼Œï¼ˆ<strong>æ‰€ä»¥æˆ‘ä»¬åç»­è°ƒè¯•æ‰“å¼€çš„åœ°å€å°±æ˜¯180ï¼‰</strong></p><p>ç„¶å location &#x2F;api å°±æ˜¯ä½ çš„è·¯å¾„ä»¥ api å¼€å¤´çš„ç½‘å€ï¼Œ è¢«è½¬å‘åˆ°</p><p><img src="https://cdn.jsdelivr.net/gh/Alanyaeer/web-component@master/assets/202310282242519.png" alt="image-20231028224242497"></p><p>åŒç† &#x2F;friend å°±è¢«è½¬å‘åˆ°</p><p><img src="https://cdn.jsdelivr.net/gh/Alanyaeer/web-component@master/assets/202310282243562.png" alt="image-20231028224303540"></p><p>å…¶ä½™çš„éƒ½è¢«è½¬å‘åˆ° 5173 ç«¯å£ã€‚</p><blockquote><p>åœ¨è¿™é‡Œ 8080 ç«¯å£æ˜¯ä½ åç«¯ç¨‹åºçš„ç«¯å£ï¼Œ è€Œ5173å¯ä»¥æ¢æˆä½ å‰ç«¯ç¨‹åºçš„ç«¯å£</p></blockquote><p>è€Œ &#x2F;api å’Œ &#x2F; friend å°±æ˜¯ æˆ‘çš„å‰ç«¯çš„è¯·æ±‚æ¥å£ ä¸€ä¸ªæ˜¯ä»¥api å¼€å¤´ä¸€ä¸ªæ˜¯ friendå¼€å¤´ ã€‚</p><p>å“¦ å¯¹äº†ï¼Œ æˆ‘ä»¬è¿˜éœ€è¦å°†å‰ç«¯çš„è¯·æ±‚åœ°å€æ¢æˆ180ç«¯å£</p><p><img src="https://cdn.jsdelivr.net/gh/Alanyaeer/web-component@master/assets/202310282246671.png" alt="image-20231028224611652"></p><p> è¿™é‡Œæ ¹æ®ä½ çš„nginx ç›‘å¬çš„ç«¯å£è€Œå®š</p><p>ç„¶åæ‰“å¼€localhost:180ï¼Œ å‘ç°å¯åŠ¨æˆåŠŸ</p><p><img src="https://cdn.jsdelivr.net/gh/Alanyaeer/web-component@master/assets/202310282247683.png" alt="image-20231028224751393"></p>]]></content>
      
      
      <categories>
          
          <category> å‰åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç–‘éš¾è§£æƒ‘ </tag>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaå®ç°æ–‡ä»¶ä¸Šä¼ å’Œæ–‡ä»¶ä¸‹è½½</title>
      <link href="/2023/10/28/java%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%92%8C%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/"/>
      <url>/2023/10/28/java%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%92%8C%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h1 id="å†™è¯¾è®¾è®°å½•"><a href="#å†™è¯¾è®¾è®°å½•" class="headerlink" title="å†™è¯¾è®¾è®°å½•"></a>å†™è¯¾è®¾è®°å½•</h1><ul><li></li></ul><h1 id="èŠå¤©ç³»ç»Ÿè¯¾è®¾éš¾é¢˜"><a href="#èŠå¤©ç³»ç»Ÿè¯¾è®¾éš¾é¢˜" class="headerlink" title="èŠå¤©ç³»ç»Ÿè¯¾è®¾éš¾é¢˜"></a>èŠå¤©ç³»ç»Ÿè¯¾è®¾éš¾é¢˜</h1><h2 id="æ–‡ä»¶ä¸Šä¼ -base64"><a href="#æ–‡ä»¶ä¸Šä¼ -base64" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ -base64"></a>æ–‡ä»¶ä¸Šä¼ -base64</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="type">String</span> <span class="variable">basepath</span> <span class="operator">=</span><span class="string">&quot;D:\\fileandpicture\\&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line"><span class="comment">// ç°åœ¨è¿™ä¸ªmessageçš„msgé‡Œé¢å­˜å‚¨äº†ä¸€ä¸ªbase64çš„æ•°æ®ï¼Œå®ƒæ˜¯ç”¨æ¥å­˜å‚¨æ–‡ä»¶çš„</span></span><br><span class="line"><span class="keyword">public</span> R&lt;String&gt; <span class="title function_">upload</span><span class="params">(<span class="meta">@RequestBody</span> Message message)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"> <span class="comment">//è·å–å®ƒçš„æ–‡ä»¶åç§°</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">curpath</span> <span class="operator">=</span> basepath + message.getFileName();</span><br><span class="line">    <span class="comment">//è·å–å®ƒçš„base64å®é™…çš„å†…å®¹ï¼Œ base64é€—å·ä¹‹å‰çš„æ˜¯æ–‡ä»¶çš„æ ¼å¼,åé¢æ‰æ˜¯çœŸæ­£çš„å†…å®¹</span></span><br><span class="line">    <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(curpath);</span><br><span class="line">    <span class="keyword">if</span>(file.exists()) file.mkdir();</span><br><span class="line">    <span class="type">FileOutputStream</span> <span class="variable">stream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(file);</span><br><span class="line">    <span class="type">String</span> <span class="variable">base64String</span> <span class="operator">=</span> message.getMsg();</span><br><span class="line">    String []parts = base64String.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">base64Data</span> <span class="operator">=</span> parts[<span class="number">1</span>];</span><br><span class="line">    <span class="comment">// è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„</span></span><br><span class="line">    <span class="type">byte</span>[] data = Base64.getDecoder().decode(base64Data);</span><br><span class="line">    <span class="comment">// å†™å…¥åˆ° æœ¬åœ°ä¸­ï¼ˆç„¶åå­˜å…¥æŠŠå®ƒçš„åå­—å­˜å…¥åˆ°æ•°æ®åº“ä¸­ï¼‰</span></span><br><span class="line">    stream.write(data);</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> xxx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ–‡ä»¶ä¸‹è½½-ç‚¹å‡»æ–‡ä»¶ä¹‹åå¯ä¸‹è½½"><a href="#æ–‡ä»¶ä¸‹è½½-ç‚¹å‡»æ–‡ä»¶ä¹‹åå¯ä¸‹è½½" class="headerlink" title="æ–‡ä»¶ä¸‹è½½ - ç‚¹å‡»æ–‡ä»¶ä¹‹åå¯ä¸‹è½½"></a>æ–‡ä»¶ä¸‹è½½ - ç‚¹å‡»æ–‡ä»¶ä¹‹åå¯ä¸‹è½½</h2><h3 id="åç«¯-java"><a href="#åç«¯-java" class="headerlink" title="åç«¯ - java"></a>åç«¯ - java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/downloadfile&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">downloadFile</span><span class="params">(HttpServletResponse response, HttpServletRequest request, String fileName, String extend)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">JSONObject</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">    <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(basepath + fileName);</span><br><span class="line">    <span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">        result.put(<span class="string">&quot;error&quot;</span>, <span class="string">&quot;ä¸‹è½½çš„æ–‡ä»¶ä¸å­˜åœ¨&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> result.toString();</span><br><span class="line">    &#125;</span><br><span class="line">    response.reset();</span><br><span class="line">    response.setContentType(extend);</span><br><span class="line">    response.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    response.setContentLength((<span class="type">int</span>) file.length());</span><br><span class="line">    <span class="comment">//è¿™ä¸ªæ˜¯ä¸ºäº†é˜²æ­¢ä¸­æ–‡åç§°çš„é—®é¢˜</span></span><br><span class="line">    response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment;filename=&quot;</span> + URLEncoder.encode(file.getName(), <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">    <span class="type">byte</span>[] readeBytes = FileUtil.readBytes(file);</span><br><span class="line">    <span class="comment">// å†™å…¥åˆ°request çš„ è¾“å‡ºæµä¸­</span></span><br><span class="line">    <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line">    os.write(readeBytes);</span><br><span class="line">    result.put(<span class="string">&quot;success&quot;</span>, <span class="string">&quot;ä¸‹è½½æˆåŠŸ&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> result.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‰ç«¯-vue"><a href="#å‰ç«¯-vue" class="headerlink" title="å‰ç«¯ - vue"></a>å‰ç«¯ - vue</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// api/download å°±æ˜¯ ä¸Šé¢åç«¯downloadçš„åœ°å€</span></span><br><span class="line">axios.<span class="title function_">get</span>(baseUrl + <span class="string">&quot;/api/downloadfile&quot;</span>, &#123;</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">        <span class="attr">fileName</span>: item.<span class="property">fileName</span>,</span><br><span class="line">        <span class="attr">extend</span>: item.<span class="property">extend</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// æ³¨æ„è¿™é‡Œä¸€å®šè¦å†™arraybufferï¼Œ ä¸ç„¶å¯èƒ½ä¼šå‡ºé”™</span></span><br><span class="line">    <span class="attr">responseType</span>: <span class="string">&quot;arraybuffer&quot;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// å…ˆè½¬æ¢ä¸º Blobç±»å‹</span></span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span>=&gt;</span><span class="keyword">new</span> <span class="title class_">Blob</span>([res], &#123;<span class="attr">type</span>: item.<span class="property">extend</span>&#125;))</span><br><span class="line"><span class="comment">// åœ¨è½¬æ¢ä¸º Fileç±»å‹</span></span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">blob</span>=&gt;</span> <span class="keyword">new</span> <span class="title class_">File</span>([blob], item.<span class="property">fileName</span>))</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">file</span>=&gt;</span>&#123;</span><br><span class="line">        item.<span class="property">msg</span> = file</span><br><span class="line">        <span class="keyword">let</span> reader = <span class="keyword">new</span> <span class="title class_">FileReader</span>()</span><br><span class="line">        <span class="keyword">let</span> fileNameTemp = item.<span class="property">fileName</span></span><br><span class="line">        reader.<span class="property">onloadend</span> = <span class="function">(<span class="params">es</span>)=&gt;</span>&#123;</span><br><span class="line">            item.<span class="property">msg</span> = es.<span class="property">target</span>.<span class="property">result</span></span><br><span class="line">            item.<span class="property">fileName</span> = fileNameTemp</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(item.<span class="property">msg</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(item.<span class="property">chatType</span> === <span class="number">1</span>)&#123;</span><br><span class="line">                srcImgList.<span class="property">value</span>.<span class="title function_">push</span>(item.<span class="property">msg</span>)</span><br><span class="line">            &#125;</span><br><span class="line">     &#125;</span><br><span class="line">    reader.<span class="title function_">readAsDataURL</span>(file)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="æ–­ç‚¹ç»­ä¼ "><a href="#æ–­ç‚¹ç»­ä¼ " class="headerlink" title="æ–­ç‚¹ç»­ä¼ "></a>æ–­ç‚¹ç»­ä¼ </h2><p>æ­£åœ¨ç¼–å†™ ã€‚ã€‚ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> ç–‘éš¾è§£æƒ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Picgoå’ŒGitHubæ­å»ºçš„é—®é¢˜</title>
      <link href="/2023/10/28/Picgo%E5%92%8CGitHub%E6%90%AD%E5%BB%BA%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/2023/10/28/Picgo%E5%92%8CGitHub%E6%90%AD%E5%BB%BA%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h1 id="æŠ¥é”™403"><a href="#æŠ¥é”™403" class="headerlink" title="æŠ¥é”™403"></a>æŠ¥é”™403</h1><p>å°†github ä½œä¸º å›¾åºŠçš„æ—¶å€™å‡ºç°äº†é—®é¢˜ï¼Œæ‰“å¼€æ—¥å¿—æ–‡æ¡£ä¸€çœ‹ï¼Œ æŠ¥é”™403ï¼Œ åœ¨ç½‘ä¸Šæœå¯»æ— æœã€‚</p><p>ç„¶åå›æƒ³èµ·åœ¨github ç”Ÿæˆtokençš„æ—¶å€™æ²¡æœ‰ç‚¹å‡»ä»»ä½•é€‰é¡¹</p><p><img src="https://cdn.jsdelivr.net/gh/Alanyaeer/web-component@master/assets/202310282025158.png" alt="image-20231028202525111"></p><p>å°†è¿™ä¸ªrepo å‹¾é€‰ä¹‹åï¼Œ å‘é€å›¾ç‰‡æˆåŠŸ</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç–‘éš¾è§£æƒ‘ </tag>
            
            <tag> github å›¾åºŠ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
